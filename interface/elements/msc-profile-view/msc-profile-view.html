<dom-module id="msc-profile-view">
  <link rel="import" type="css" href="../../styles/shared-styles.html">
  <link rel="import" type="css" href="msc-profile-view.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <style>
    #contentContainer {
      background: transparent;
      height: 0px !important;
      width: 0px !important;
      position: absolute;
      top: -1000px;
    }
  </style>
  <template>
    <div class="flex-center title" style="margin-bottom: 70px;">
      <img src="/interface/images/logon.svg" width="210" style="position: absolute; top: 30px; left: 30px; margin-right: 20px">
    </div>
    <img src="/interface/images/icons/musicoin.png" class="clickable" title="Display Balance In MUSIC" style="position: absolute; right: 140px;" on-tap="displayBalanceInMusic">
    <img src="/interface/images/icons/bitcoin.png" class="clickable" title="Display Balance In BTC" style="position: absolute; right: 100px;" on-tap="displayBalanceInBtc">
    <img src="/interface/images/icons/dollar.png" class="clickable" title="Display Balance In USD" style="position: absolute; right: 60px;" on-tap="displayBalanceInUsd">
    <img src="/interface/images/icons/mark.png" class="clickable" title="Market Conversion Rates" style="position: absolute; right: 20px;" on-tap="marketRates">
    <msc-main-status></msc-main-status>
    <div class="buttons-style top-buttons">
      <paper-button raised on-tap="handleNewAccount" id="new-account">NEW ACCOUNT</paper-button>
      <input id="fileDialog" type="file" style="display: none;">
      <paper-button raised on-tap="addExistingAccount" id="old-wallet">IMPORT ACCOUNT</paper-button>
      <paper-button raised on-tap="showSendDialog" id="send-funds">SEND FUNDS</paper-button>
    </div>

    <div id="accounts">
      <table width="100%" style="font-size:120%;border: none; text-align: center;">
        <tr id ="tableheader" style="background-color: #333 !important;">
          <th style="width: 40vw">ACCOUNT</th>
          <th style="width: 38vw">BALANCE</th>
          <th>PRIMARY</th>
          <th>EXPLORER</th>
          <th>BACKUP</th>
        </tr>
        <template is="dom-repeat" items="[[accounts]]" as="account">
          <tr id="data1" coinbase$="[[account.isCoinbase]]">
            <td class="account" style="color: #393a3c !important;">[[account.address]]</td>
            <td class="account-music" style="color: #393a3c !important;" title="[[account.balance]]">[[account.displayBalance]]</td>
            <td class="account-btc" style="color: #393a3c !important; display: none;" title="[[account.balance]]">[[account.displayBalanceBtc]]</td>
            <td class="account-usd" style="color: #393a3c !important; display: none;" title="[[account.balance]]">[[account.displayBalanceUsd]]</td>
            <td class="clickable">
              <iron-icon icon="{{_computeCheckboxIcon(account.isCoinbase)}}" on-tap="changeCoinbase"></iron-icon>
            </td>
            <td class="td-button">
                <iron-icon icon="icons:explore" class=clickable on-tap="showExplorerWindow"></iron-icon>
            </td>
            <td class="td-button">
                <iron-icon icon="icons:backup" class=clickable on-tap="backupAccount"></iron-icon>
                <input id="fileDialogBackup" type="file" nwdirectory style="display: none;">
            </td>
          </tr>
        </template>
      </table>
      <div class="flex-between">
        <div id="row1">
        <paper-toggle-button
                id="isMining"
                on-tap="toggleMiningState" class="hidden">
          {{locale.userProfileView.actions.Mining}}
        </paper-toggle-button>
      </div>

      </div>
    </div>
    <div style="padding-top: 40px;">
    </div>
      <div id="status">{{txStatus}}</div>
    </div>

    <paper-dialog id="marketRatesDialog">
      <p>Current rates (for 1 MUSIC):</p>
      <p>BTC: {{musicBtc}}</p>
      <p>USD: {{musicUsd}}</p>
      <p>* We use CoinMarketCap API to display conversion rates, real exhange rates could be slightly different.</p>
      <div class="buttons">
      <paper-button dialog-dismiss>Ok</paper-button>
      </div>
    </paper-dialog>
    
    <paper-dialog id="newAccountDialog">
      <p>Enter a password for the new account.  Please note that there is no way to recover this password later.</p>
      <paper-input id=newAccountPassword type="password" label="Password"></paper-input>
      <paper-input id=newAccountPasswordVerify type="password" label="Re Enter Password"></paper-input>
      <div class="buttons">
        <paper-button dialog-dismiss on-tap="clearNewAccountFields">Cancel</paper-button>
        <paper-button autofocus on-tap="createNewAccount">Ok</paper-button>
      </div>
    </paper-dialog>

    <paper-dialog id="addPeerDialog">
      <div>Paste one or more enodes separated by commas as follows:
        <br>enode://abcdefg@101.102.103.104:30303,
        <br>enode://zyxwvu@101.102.103.104:30303
      </div>
      <iron-autogrow-textarea id=newPeerEnodeAddress label="enode address" style="height: 200px; width: 600px"></iron-autogrow-textarea>
      <div class="buttons">
        <paper-button onclick='gui.Shell.openExternal("https://github.com/Musicoin/desktop/wiki/Default-Enodes-list")'>NODES LIST</paper-button>
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button autofocus on-tap="addPeers">Add Enode(s)</paper-button>
      </div>
    </paper-dialog>

    <paper-dialog id="setCoinbaseDialog">
      <p>Enter the Account Address</p>
      <p>
        <b class="warn">WARNING</b>: Make sure you have access to this account!  If you want to use one of the local
        accounts as the account, cancel this dialog and check the account list column.
      </p>
      <paper-input id=customCoinbase label="address"></paper-input>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm autofocus on-tap="setCustomCoinbase">Ok</paper-button>
      </div>
    </paper-dialog>

    <paper-dialog id="sendDialog">
      <p>Enter the recipient address, the amount to send, and your password</p>
      <paper-input disabled id="sender" label="From Account"></paper-input>
      <paper-input id="recipient" label="Recipient"></paper-input>
      <paper-input id="coins" label="Amount (in Musicoins)"></paper-input>
      <paper-input id=sendPassword type="password" label="Password"></paper-input>
      <div class="buttons">
        <paper-button dialog-dismiss on-tap="clearSendFields">Cancel</paper-button>
        <paper-button dialog-confirm autofocus on-tap="sendCoins">Ok</paper-button>
      </div>
    </paper-dialog>
    
    <paper-dialog id="gmcOverwriteCache">
      <p>Select Gmc (in memory) cache size</p>
      <paper-radio-group selected="gmc-512">
        <paper-radio-button name="gmc-512" onclick=document.querySelector("msc-profile-view").gmcOverwriteCache(512)>512MB (default) </paper-radio-button>
        <paper-radio-button name="gmc-1024" onclick=document.querySelector("msc-profile-view").gmcOverwriteCache(1024)>1024MB </paper-radio-button>
        <paper-radio-button name="gmc-2048" onclick=document.querySelector("msc-profile-view").gmcOverwriteCache(2048)>2048MB </paper-radio-button>
        <paper-radio-button name="gmc-4096" onclick=document.querySelector("msc-profile-view").gmcOverwriteCache(4096)>4096MB </paper-radio-button>
      </paper-radio-group>
      <div class="buttons">
      <paper-button dialog-dismiss>Cancel</paper-button>
      </div>
    </paper-dialog>
    
    <style>:host {--primary-text-color: grey;}</style>
    <paper-dialog id="sendDialogMenu">
      <p>Enter the recipient address, the amount to send, and your password</p>
      <div class="autocomplete-wrapper">
      <paper-input id="sender" label="From Account"></paper-input>
      <paper-autocomplete-suggestions
      for="sender"
      source="[[getAccounts]]"></paper-autocomplete-suggestions>
      </div>
      <paper-input id="recipient" label="Recipient"></paper-input>
      <paper-input id="coins" label="Amount (in Musicoins)"></paper-input>
      <paper-input id=sendPassword type="password" label="Password"></paper-input>
      <div class="buttons">
        <paper-button dialog-dismiss on-tap="clearSendFields">Cancel</paper-button>
        <paper-button dialog-confirm autofocus on-tap="sendCoins">Ok</paper-button>
      </div>
    </paper-dialog>

  </template>
  <script src="msc-profile-view.js"></script>
</dom-module>
